<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmberMate - Your Health Companion</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">ğŸ”¥</span>
                    <span class="logo-text">EmberMate</span>
                </div>
                <div class="header-actions">
                    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                        <span class="theme-icon">ğŸŒ™</span>
                    </button>
                    <div class="dropdown">
                        <button class="btn-icon" id="menuButton" aria-label="Menu">
                            <span class="menu-icon">âš™ï¸</span>
                        </button>
                        <div class="dropdown-menu" id="dropdownMenu">
                            <button class="dropdown-item" id="viewTutorial">
                                <span>ğŸ“</span> View Tutorial
                            </button>
                            <button class="dropdown-item" id="viewDataTable">
                                <span>ğŸ“‹</span> View Data Table
                            </button>
                            <button class="dropdown-item" id="exportJson">
                                <span>ğŸ“Š</span> Export as JSON
                            </button>
                            <button class="dropdown-item" id="exportCsv">
                                <span>ğŸ“„</span> Export as CSV
                            </button>
                            <button class="dropdown-item" id="importData">
                                <span>ğŸ“¥</span> Import Data
                            </button>
                            <button class="dropdown-item" id="resetData">
                                <span>ğŸ”„</span> Load Sample Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="main-content">
        <div class="container">
            <!-- Welcome Section -->
            <section class="welcome-section">
                <div class="welcome-content">
                    <div class="welcome-text">
                        <h1 class="welcome-title">Welcome back! ğŸ‘‹</h1>
                        <p class="welcome-subtitle">Here's your health overview for today</p>
                    </div>
                    <button class="btn-log-vitals" id="logTodayVitalsBtn">
                        <span class="btn-icon">ğŸ“Š</span>
                        <span class="btn-text">Log Today's Vitals</span>
                    </button>
                </div>
            </section>

            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
                <!-- Quick Stats Widget -->
                <div class="widget quick-stats">
                    <div class="widget-header">
                        <h2 class="widget-title">Quick Stats</h2>
                        <button class="btn-add" id="addVitalsBtn">+</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon bp">ğŸ’“</div>
                            <div class="stat-info">
                                <span class="stat-label">Blood Pressure</span>
                                <span class="stat-value" id="bpValue">--/--</span>
                                <span class="stat-unit">mmHg</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon heart">â¤ï¸</div>
                            <div class="stat-info">
                                <span class="stat-label">Heart Rate</span>
                                <span class="stat-value" id="hrValue">--</span>
                                <span class="stat-unit">bpm</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon weight">âš–ï¸</div>
                            <div class="stat-info">
                                <span class="stat-label">Weight</span>
                                <span class="stat-value" id="weightValue">--</span>
                                <span class="stat-unit">lbs</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon glucose">ğŸ©¸</div>
                            <div class="stat-info">
                                <span class="stat-label">Glucose</span>
                                <span class="stat-value" id="glucoseValue">--</span>
                                <span class="stat-unit">mg/dL</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Streak Counter Widget -->
                <div class="widget streak-widget">
                    <div class="widget-header">
                        <h2 class="widget-title">Daily Streak</h2>
                        <span class="widget-icon">ğŸ¯</span>
                    </div>
                    <div class="streak-content">
                        <div class="streak-fire" id="streakFire">ğŸ”¥</div>
                        <div class="streak-number" id="streakNumber">0</div>
                        <div class="streak-label">days in a row!</div>
                        <div class="streak-message" id="streakMessage">Keep going strong!</div>
                    </div>
                </div>

                <!-- AI Insights Widget -->
                <div class="widget ai-insights">
                    <div class="widget-header">
                        <h2 class="widget-title">AI Insights</h2>
                        <span class="widget-icon">ğŸ¤–</span>
                    </div>
                    <div class="insights-container" id="insightsContainer">
                        <div class="insight-item">
                            <span class="insight-icon">ğŸ’¡</span>
                            <p class="insight-text">Add some health data to get personalized insights!</p>
                        </div>
                    </div>
                </div>

                <!-- Medication Tracker Widget -->
                <div class="widget medication-tracker">
                    <div class="widget-header">
                        <h2 class="widget-title">Medications</h2>
                        <button class="btn-add" id="addMedicationBtn">+</button>
                    </div>
                    <div class="medication-list" id="medicationList">
                        <p class="empty-state">No medications added yet</p>
                    </div>
                </div>

                <!-- Vitals Chart Widget -->
                <div class="widget vitals-chart">
                    <div class="widget-header">
                        <h2 class="widget-title">Vitals Trends</h2>
                        <div class="chart-controls">
                            <select class="chart-selector" id="chartSelector">
                                <option value="bp">Blood Pressure</option>
                                <option value="hr">Heart Rate</option>
                                <option value="weight">Weight</option>
                                <option value="glucose">Glucose</option>
                            </select>
                            <button class="btn-icon" id="overlayToggle" title="Overlay multiple vitals">
                                <span>ğŸ“Š</span>
                            </button>
                        </div>
                    </div>
                    <div class="chart-time-scale">
                        <button class="time-scale-btn active" data-days="7">7 Days</button>
                        <button class="time-scale-btn" data-days="30">30 Days</button>
                        <button class="time-scale-btn" data-days="90">90 Days</button>
                        <button class="time-scale-btn" data-days="365">1 Year</button>
                    </div>
                    <div class="overlay-selector" id="overlaySelector" style="display: none;">
                        <label class="overlay-checkbox">
                            <input type="checkbox" value="bp" class="overlay-option">
                            <span>Blood Pressure</span>
                        </label>
                        <label class="overlay-checkbox">
                            <input type="checkbox" value="hr" class="overlay-option">
                            <span>Heart Rate</span>
                        </label>
                        <label class="overlay-checkbox">
                            <input type="checkbox" value="weight" class="overlay-option">
                            <span>Weight</span>
                        </label>
                        <label class="overlay-checkbox">
                            <input type="checkbox" value="glucose" class="overlay-option">
                            <span>Glucose</span>
                        </label>
                    </div>
                    <div class="chart-container">
                        <canvas id="vitalsChart"></canvas>
                    </div>
                </div>

                <!-- Appointments Widget -->
                <div class="widget appointments">
                    <div class="widget-header">
                        <h2 class="widget-title">Appointments</h2>
                        <button class="btn-add" id="addAppointmentBtn">+</button>
                    </div>
                    <div class="appointments-list" id="appointmentsList">
                        <p class="empty-state">No upcoming appointments</p>
                    </div>
                </div>

                <!-- Goal Tracker Widget -->
                <div class="widget goal-tracker">
                    <div class="widget-header">
                        <h2 class="widget-title">Health Goals</h2>
                        <button class="btn-add" id="addGoalBtn">+</button>
                    </div>
                    <div class="goals-list" id="goalsList">
                        <p class="empty-state">Set your first health goal!</p>
                    </div>
                </div>

                <!-- Daily Motivation Widget -->
                <div class="widget motivation">
                    <div class="widget-header">
                        <h2 class="widget-title">Daily Motivation</h2>
                        <button class="btn-refresh" id="refreshQuote">ğŸ”„</button>
                    </div>
                    <div class="motivation-content">
                        <p class="motivation-quote" id="motivationQuote">Loading...</p>
                        <p class="motivation-author" id="motivationAuthor"></p>
                    </div>
                </div>

                <!-- Achievements Widget -->
                <div class="widget achievements">
                    <div class="widget-header">
                        <h2 class="widget-title">Achievements</h2>
                        <span class="widget-icon">ğŸ†</span>
                    </div>
                    <div class="achievements-grid" id="achievementsGrid">
                        <!-- Achievements will be dynamically added -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Add Medication Modal -->
    <div class="modal" id="medicationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Medication</h3>
                <button class="modal-close" data-modal="medicationModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Medication Name</label>
                    <input type="text" id="medName" placeholder="e.g., Aspirin">
                </div>
                <div class="form-group">
                    <label>Dosage</label>
                    <input type="text" id="medDosage" placeholder="e.g., 100mg">
                </div>
                <div class="form-group">
                    <label>Time</label>
                    <input type="time" id="medTime">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="medicationModal">Cancel</button>
                <button class="btn btn-primary" id="saveMedication">Save</button>
            </div>
        </div>
    </div>

    <!-- Add Appointment Modal -->
    <div class="modal" id="appointmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Appointment</h3>
                <button class="modal-close" data-modal="appointmentModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="apptTitle" placeholder="e.g., Doctor Visit">
                </div>
                <div class="form-group">
                    <label>Date</label>
                    <input type="date" id="apptDate">
                </div>
                <div class="form-group">
                    <label>Time</label>
                    <input type="time" id="apptTime">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" id="apptLocation" placeholder="e.g., Main Street Clinic">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="appointmentModal">Cancel</button>
                <button class="btn btn-primary" id="saveAppointment">Save</button>
            </div>
        </div>
    </div>

    <!-- Add Goal Modal -->
    <div class="modal" id="goalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Health Goal</h3>
                <button class="modal-close" data-modal="goalModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Goal Name</label>
                    <input type="text" id="goalName" placeholder="e.g., Exercise 3x per week">
                </div>
                <div class="form-group">
                    <label>Target</label>
                    <input type="number" id="goalTarget" placeholder="e.g., 30">
                </div>
                <div class="form-group">
                    <label>Current Progress</label>
                    <input type="number" id="goalProgress" placeholder="e.g., 10">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="goalModal">Cancel</button>
                <button class="btn btn-primary" id="saveGoal">Save</button>
            </div>
        </div>
    </div>

    <!-- Add Vitals Modal -->
    <div class="modal" id="vitalsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Vital Signs Reading</h3>
                <button class="modal-close" data-modal="vitalsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Date & Time</label>
                    <input type="datetime-local" id="vitalsDateTime">
                </div>
                
                <div class="vitals-section">
                    <h4 class="section-title">ğŸ’“ Blood Pressure</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Systolic</label>
                            <input type="number" id="vitalsSystolic" placeholder="120" min="50" max="250">
                        </div>
                        <div class="form-group">
                            <label>Diastolic</label>
                            <input type="number" id="vitalsDiastolic" placeholder="80" min="30" max="150">
                        </div>
                    </div>
                </div>

                <div class="vitals-section">
                    <h4 class="section-title">â¤ï¸ Heart Rate</h4>
                    <div class="form-group">
                        <label>Beats per Minute</label>
                        <input type="number" id="vitalsHeartRate" placeholder="72" min="30" max="220">
                    </div>
                </div>

                <div class="vitals-section">
                    <h4 class="section-title">âš–ï¸ Weight</h4>
                    <div class="form-group">
                        <label>Pounds (lbs)</label>
                        <input type="number" id="vitalsWeight" placeholder="175" min="50" max="500" step="0.1">
                    </div>
                </div>

                <div class="vitals-section">
                    <h4 class="section-title">ğŸ©¸ Blood Glucose</h4>
                    <div class="form-group">
                        <label>mg/dL</label>
                        <input type="number" id="vitalsGlucose" placeholder="100" min="40" max="400">
                    </div>
                </div>

                <p class="form-note">ğŸ’¡ Tip: You can fill in just the vitals you want to track. Empty fields will be skipped.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="vitalsModal">Cancel</button>
                <button class="btn btn-primary" id="saveVitals">Save Reading</button>
            </div>
        </div>
    </div>

    <!-- Hidden file input for import -->
    <input type="file" id="fileInput" accept=".json" style="display: none;">

    <!-- Onboarding Modal -->
    <div class="onboarding-overlay" id="onboardingOverlay">
        <div class="onboarding-modal">
            <!-- Progress Indicator -->
            <div class="onboarding-progress">
                <div class="progress-dot active" data-step="0"></div>
                <div class="progress-dot" data-step="1"></div>
                <div class="progress-dot" data-step="2"></div>
                <div class="progress-dot" data-step="3"></div>
                <div class="progress-dot" data-step="4"></div>
            </div>

            <!-- Step 0: Welcome -->
            <div class="onboarding-step" data-step="0">
                <div class="onboarding-icon">ğŸ”¥</div>
                <h2 class="onboarding-title">Welcome to EmberMate!</h2>
                <p class="onboarding-text">Your personal health companion is here to help you track, understand, and improve your health journey.</p>
                <div class="onboarding-features">
                    <div class="feature-item">
                        <span class="feature-emoji">ğŸ“Š</span>
                        <span class="feature-text">Track vitals daily</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-emoji">ğŸ¤–</span>
                        <span class="feature-text">Get AI insights</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-emoji">ğŸ†</span>
                        <span class="feature-text">Unlock achievements</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-emoji">ğŸ”¥</span>
                        <span class="feature-text">Build daily streaks</span>
                    </div>
                </div>
                <p class="onboarding-subtext">Let's take a quick tour! (2 minutes)</p>
            </div>

            <!-- Step 1: Track Your Vitals -->
            <div class="onboarding-step" data-step="1">
                <div class="onboarding-icon">ğŸ’“</div>
                <h2 class="onboarding-title">Track Your Vitals</h2>
                <p class="onboarding-text">Monitor your blood pressure, heart rate, weight, and glucose all in one place.</p>
                <div class="onboarding-visual">
                    <div class="visual-card">
                        <div class="visual-header">
                            <span>Quick Stats</span>
                            <span class="visual-plus">+</span>
                        </div>
                        <div class="visual-stats">
                            <div class="visual-stat">
                                <span class="stat-emoji">ğŸ’“</span>
                                <span class="stat-text">117/75</span>
                            </div>
                            <div class="visual-stat">
                                <span class="stat-emoji">â¤ï¸</span>
                                <span class="stat-text">69 bpm</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="onboarding-tip">
                    <span class="tip-icon">ğŸ’¡</span>
                    <span class="tip-text">Click the <strong>+ button</strong> in Quick Stats to add your readings!</span>
                </div>
            </div>

            <!-- Step 2: AI Insights & Gamification -->
            <div class="onboarding-step" data-step="2">
                <div class="onboarding-icon">ğŸ¤–</div>
                <h2 class="onboarding-title">Smart AI Insights</h2>
                <p class="onboarding-text">Get personalized health recommendations based on your data - 100% private and client-side!</p>
                <div class="onboarding-example">
                    <div class="insight-example">
                        <span class="insight-emoji">ğŸ’¡</span>
                        <p class="insight-sample">"Your blood pressure has been optimal at 118/75 mmHg over the past week."</p>
                    </div>
                    <div class="insight-example">
                        <span class="insight-emoji">ğŸ“ˆ</span>
                        <p class="insight-sample">"You've lost 2.3 lbs over the past two weeks - great progress!"</p>
                    </div>
                </div>
                <div class="onboarding-badge-preview">
                    <p class="badge-preview-text">Plus, unlock achievements as you progress!</p>
                    <div class="badge-row">
                        <div class="mini-badge">ğŸŒ±<br><span>First Steps</span></div>
                        <div class="mini-badge">ğŸ”¥<br><span>Week Warrior</span></div>
                        <div class="mini-badge">ğŸ‘‘<br><span>Monthly Master</span></div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Build Your Streak -->
            <div class="onboarding-step" data-step="3">
                <div class="onboarding-icon">ğŸ”¥</div>
                <h2 class="onboarding-title">Build Your Streak!</h2>
                <p class="onboarding-text">Check in daily to build consistency. Watch your fire grow as you progress!</p>
                <div class="streak-progression">
                    <div class="streak-stage">
                        <div class="streak-fire-demo">ğŸ”¥</div>
                        <div class="streak-days">Day 1-6</div>
                    </div>
                    <div class="streak-arrow">â†’</div>
                    <div class="streak-stage">
                        <div class="streak-fire-demo">ğŸ”¥ğŸ”¥</div>
                        <div class="streak-days">Day 7-13</div>
                    </div>
                    <div class="streak-arrow">â†’</div>
                    <div class="streak-stage">
                        <div class="streak-fire-demo">ğŸ”¥ğŸ”¥ğŸ”¥</div>
                        <div class="streak-days">Day 14-29</div>
                    </div>
                    <div class="streak-arrow">â†’</div>
                    <div class="streak-stage">
                        <div class="streak-fire-demo">ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥</div>
                        <div class="streak-days">Day 30+</div>
                    </div>
                </div>
                <div class="onboarding-benefits">
                    <h3 class="benefits-title">Consistency Benefits:</h3>
                    <div class="benefit-list">
                        <div class="benefit-item">âœ… Better health insights</div>
                        <div class="benefit-item">âœ… Unlock rare achievements</div>
                        <div class="benefit-item">âœ… Track trends over time</div>
                        <div class="benefit-item">âœ… Build healthy habits</div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Complete Toolkit -->
            <div class="onboarding-step" data-step="4">
                <div class="onboarding-icon">ğŸ¯</div>
                <h2 class="onboarding-title">Your Complete Health Toolkit</h2>
                <p class="onboarding-text">Everything you need to manage your health in one place:</p>
                <div class="toolkit-grid">
                    <div class="toolkit-item">
                        <span class="toolkit-emoji">ğŸ’Š</span>
                        <span class="toolkit-name">Medications</span>
                        <span class="toolkit-desc">Track daily meds</span>
                    </div>
                    <div class="toolkit-item">
                        <span class="toolkit-emoji">ğŸ“…</span>
                        <span class="toolkit-name">Appointments</span>
                        <span class="toolkit-desc">Never miss a visit</span>
                    </div>
                    <div class="toolkit-item">
                        <span class="toolkit-emoji">ğŸ¯</span>
                        <span class="toolkit-name">Goals</span>
                        <span class="toolkit-desc">Set & achieve targets</span>
                    </div>
                    <div class="toolkit-item">
                        <span class="toolkit-emoji">ğŸ“Š</span>
                        <span class="toolkit-name">Charts</span>
                        <span class="toolkit-desc">Visualize trends</span>
                    </div>
                </div>
                <div class="privacy-note">
                    <span class="privacy-icon">ğŸ”’</span>
                    <span class="privacy-text"><strong>100% Private:</strong> All data stays in your browser. No servers, no tracking!</span>
                </div>
                <div class="onboarding-cta">
                    <p class="cta-text">Ready to start your health journey?</p>
                    <div class="cta-options">
                        <button class="cta-btn primary" id="loadSampleDataBtn">
                            <span>ğŸ¨ Load Sample Data</span>
                            <small>See features in action</small>
                        </button>
                        <button class="cta-btn secondary" id="startFreshBtn">
                            <span>ğŸš€ Start Fresh</span>
                            <small>Begin with blank slate</small>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="onboarding-nav">
                <button class="nav-btn secondary" id="skipOnboarding">Skip Tour</button>
                <div class="nav-actions">
                    <button class="nav-btn secondary" id="prevStep" style="display: none;">â† Back</button>
                    <button class="nav-btn primary" id="nextStep">Next â†’</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Data Table Modal -->
    <div class="modal modal-large" id="dataTableModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“‹ Data Table View</h3>
                <button class="modal-close" data-modal="dataTableModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="table-controls">
                    <div class="table-tabs">
                        <button class="table-tab active" data-table="bloodPressure">Blood Pressure</button>
                        <button class="table-tab" data-table="heartRate">Heart Rate</button>
                        <button class="table-tab" data-table="weight">Weight</button>
                        <button class="table-tab" data-table="glucose">Glucose</button>
                    </div>
                    <button class="btn btn-primary" id="exportTableCsv">Export to CSV</button>
                </div>
                <div class="table-container">
                    <table class="data-table" id="dataTable">
                        <thead id="tableHead"></thead>
                        <tbody id="tableBody"></tbody>
                    </table>
                </div>
                <div class="table-stats" id="tableStats"></div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>
