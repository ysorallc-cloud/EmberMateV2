<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmberMate - Your Personal Health Companion</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- HIPAA Disclaimer Banner -->
    <div class="hipaa-disclaimer" id="hipaaDisclaimer">
        <div class="hipaa-content">
            <span class="hipaa-icon">ℹ️</span>
            <span class="hipaa-text">
                <strong>Demo Notice:</strong> This is a demonstration application and is NOT HIPAA compliant. 
                Do not enter real personal health information.
            </span>
        </div>
        <button class="hipaa-close" onclick="dismissHipaaDisclaimer()" aria-label="Close disclaimer">×</button>
    </div>

    <nav class="navbar">
        <div class="nav-left">
            <div class="hamburger" onclick="toggleSidebar()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="logo">
                <div class="logo-icon">💚</div>
                <span>EmberMate</span>
            </div>
        </div>

        <div class="nav-right">
            <div class="search-box">
                <span class="search-icon">🔍</span>
                <input type="text" class="search-input" id="searchInput" placeholder="Search..." oninput="performSearch()">
            </div>
            <div class="icon-btn" onclick="openNotificationsModal()" title="Alerts">
                🔔
                <span class="alert-badge" id="alertBadge" style="display: none;"></span>
            </div>
            <div class="user-avatar">U</div>
        </div>
    </nav>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-section">
            <div class="sidebar-title">Overview</div>
            <ul class="sidebar-menu">
                <li class="sidebar-item active" onclick="navigateTo('dashboard')">
                    <span class="sidebar-icon">📊</span>
                    <span>Dashboard</span>
                </li>
                <li class="sidebar-item" onclick="navigateTo('analytics')">
                    <span class="sidebar-icon">📈</span>
                    <span>Analytics</span>
                </li>
            </ul>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Daily Health</div>
            <ul class="sidebar-menu">
                <li class="sidebar-item" onclick="navigateTo('medications')">
                    <span class="sidebar-icon">💊</span>
                    <span>Medications</span>
                </li>
                <li class="sidebar-item" onclick="navigateTo('vitals')">
                    <span class="sidebar-icon">📈</span>
                    <span>Vitals</span>
                </li>
                <li class="sidebar-item" onclick="navigateTo('journal')">
                    <span class="sidebar-icon">📝</span>
                    <span>Journal</span>
                </li>
                <li class="sidebar-item" onclick="navigateTo('reminders')">
                    <span class="sidebar-icon">⏰</span>
                    <span>Reminders</span>
                </li>
            </ul>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Care Management</div>
            <ul class="sidebar-menu">
                <li class="sidebar-item" onclick="navigateTo('appointments')">
                    <span class="sidebar-icon">📅</span>
                    <span>Appointments</span>
                </li>
                <li class="sidebar-item" onclick="navigateTo('team')">
                    <span class="sidebar-icon">👥</span>
                    <span>Care Team</span>
                </li>
                <li class="sidebar-item" onclick="navigateTo('records')">
                    <span class="sidebar-icon">🏥</span>
                    <span>Records</span>
                </li>
            </ul>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Account</div>
            <ul class="sidebar-menu">
                <li class="sidebar-item" onclick="navigateTo('settings')">
                    <span class="sidebar-icon">⚙️</span>
                    <span>Settings</span>
                </li>
                <li class="sidebar-item" onclick="openHelpModal()">
                    <span class="sidebar-icon">❓</span>
                    <span>Help & Tutorial</span>
                </li>
            </ul>
        </div>
    </aside>

    <main class="main-content" id="mainContent">
        <!-- BP Alert Banner -->
        <div class="alert-banner" id="bpAlertBanner">
            <div class="alert-banner-icon">⚠️</div>
            <div class="alert-banner-content">
                <div class="alert-banner-title">Blood Pressure Alert</div>
                <div class="alert-banner-text">Your blood pressure reading of 152/95 is above your threshold. Please rest and recheck in 15 minutes.</div>
            </div>
            <div class="alert-banner-actions">
                <button class="alert-btn" onclick="dismissAlert()">Dismiss</button>
                <button class="alert-btn primary" onclick="showToast('Contacting healthcare provider...')">Contact Provider</button>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div class="page-container active" id="page-dashboard">
            <div class="hero-section">
                <div class="hero-content">
                    <h1 class="hero-greeting" id="heroGreeting">Good Morning, User</h1>
                    <p class="hero-quote" id="dailyQuote">"Your health is an investment, not an expense."</p>
                    <p class="hero-subtitle">3 medications due today • Next appointment tomorrow at 2:00 PM</p>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card" onclick="navigateTo('medications')">
                    <div class="stat-icon peach">💊</div>
                    <div class="stat-content">
                        <div class="stat-label">Medications Due</div>
                        <div class="stat-value" id="medsDueCount">3</div>
                        <div class="stat-change attention">
                            <span>⚠</span>
                            <span id="medsDueText">2 pending doses</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card" onclick="navigateTo('appointments')">
                    <div class="stat-icon mint">📅</div>
                    <div class="stat-content">
                        <div class="stat-label">Next Appointment</div>
                        <div class="stat-value">Tomorrow</div>
                        <div class="stat-change positive">
                            <span>✓</span>
                            <span>Primary Care • 2:00 PM</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card" onclick="navigateTo('vitals')">
                    <div class="stat-icon teal">📈</div>
                    <div class="stat-content">
                        <div class="stat-label">Latest Vitals</div>
                        <div class="stat-value">Normal</div>
                        <div class="stat-change positive">
                            <span>✓</span>
                            <span id="vitalsText">BP: 128/82 • HR: 72</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card" onclick="navigateTo('journal')">
                    <div class="stat-icon navy">✨</div>
                    <div class="stat-content">
                        <div class="stat-label">Care Streak</div>
                        <div class="stat-value" id="careStreak">7</div>
                        <div class="stat-change positive">
                            <span>↑</span>
                            <span>Days logged</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="quick-actions-section">
                <h2 class="section-title">Quick Actions</h2>
                <div class="quick-actions">
                    <button class="quick-action-btn primary" onclick="openLogMedicationModal()">
                        <span class="quick-action-icon">💊</span>
                        <span class="quick-action-label">Log Medication</span>
                    </button>
                    <button class="quick-action-btn" onclick="openRecordVitalsModal()">
                        <span class="quick-action-icon">📈</span>
                        <span class="quick-action-label">Record Vitals</span>
                    </button>
                    <button class="quick-action-btn" onclick="navigateTo('appointments')">
                        <span class="quick-action-icon">📅</span>
                        <span class="quick-action-label">View Appointments</span>
                    </button>
                    <button class="quick-action-btn" onclick="openJournalModal()">
                        <span class="quick-action-icon">📝</span>
                        <span class="quick-action-label">Add Note</span>
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Recent Activity</h3>
                    <span class="card-action">View all →</span>
                </div>
                <div class="card-body">
                    <div class="activity-list" id="recentActivityList">
                        <div class="activity-item">
                            <div class="activity-icon" style="background: linear-gradient(135deg, rgba(45, 155, 155, 0.15), rgba(45, 155, 155, 0.25));">💊</div>
                            <div class="activity-content">
                                <div class="activity-title">Lisinopril taken</div>
                                <div class="activity-meta">Today at 8:15 AM</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Medications Page -->
        <div class="page-container" id="page-medications">
            <div class="page-header-section">
                <h1 class="page-main-title">Medications</h1>
                <p class="page-description">Manage your medication schedule and track side effects</p>
            </div>

            <div class="data-entry-guide">
                <div class="guide-icon">📋</div>
                <div class="guide-content">
                    <div class="guide-title">How to Track Your Medications</div>
                    <div class="guide-text">Click the status badges to mark medications as taken. Use the "Log" button to report side effects. All changes sync automatically to your health dashboard.</div>
                    <div class="guide-steps">
                        <div class="guide-step" onclick="demonstrateStatusUpdate()">
                            <div class="step-number">1</div>
                            <div class="step-text">Click status to update</div>
                        </div>
                        <div class="guide-step" onclick="demonstrateSideEffects()">
                            <div class="step-number">2</div>
                            <div class="step-text">Report side effects</div>
                        </div>
                        <div class="guide-step" onclick="demonstrateProgress()">
                            <div class="step-number">3</div>
                            <div class="step-text">Review daily progress</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="custom-table-container">
                <div class="custom-table-header">
                    <h3 class="custom-table-title">Today's Medications</h3>
                    
                    <div class="table-controls">
                        <div class="table-search">
                            <span class="table-search-icon">🔍</span>
                            <input type="text" class="table-search-input" placeholder="Search medications...">
                        </div>

                        <button class="table-btn" onclick="showToast('Export feature')">
                            📥 Export
                        </button>

                        <button class="table-btn-primary" onclick="openAddMedicationModal()">
                            ➕ Add Medication
                        </button>
                    </div>
                </div>

                <div class="custom-table-wrapper">
                    <table class="custom-table" id="medicationsTable">
                        <thead>
                            <tr>
                                <th style="width: 50px;">
                                    <input type="checkbox" class="table-checkbox">
                                </th>
                                <th class="sortable">Medication</th>
                                <th class="sortable">Dosage</th>
                                <th class="sortable">Time</th>
                                <th class="sortable">Frequency</th>
                                <th class="sortable">Status</th>
                                <th class="sortable">Side Effects</th>
                                <th class="sortable">Prescriber</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-med-id="1">
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Lisinopril</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">10mg</td>
                                <td class="editable-cell" onclick="makeEditable(this)">8:00 AM</td>
                                <td>Once daily</td>
                                <td>
                                    <span class="status-badge green" onclick="toggleMedStatus(this, 1, 'Lisinopril')">
                                        <span class="status-dot green"></span>
                                        Taken
                                    </span>
                                </td>
                                <td>
                                    <span class="status-badge teal">None reported</span>
                                </td>
                                <td>Primary Care Provider</td>
                                <td>
                                    <div class="table-actions">
                                        <button class="action-btn" onclick="openSideEffectModal('Lisinopril')">📝 Log</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-med-id="2">
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Metformin</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">500mg</td>
                                <td class="editable-cell" onclick="makeEditable(this)">12:00 PM</td>
                                <td>Twice daily</td>
                                <td>
                                    <span class="status-badge peach" onclick="toggleMedStatus(this, 2, 'Metformin')">
                                        <span class="status-dot peach"></span>
                                        Due Soon
                                    </span>
                                </td>
                                <td>
                                    <span class="status-badge orange">
                                        <span class="status-dot orange"></span>
                                        Mild nausea
                                    </span>
                                </td>
                                <td>Specialist</td>
                                <td>
                                    <div class="table-actions">
                                        <button class="action-btn" onclick="openSideEffectModal('Metformin')">📝 Log</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-med-id="3">
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Atorvastatin</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">20mg</td>
                                <td class="editable-cell" onclick="makeEditable(this)">8:00 PM</td>
                                <td>Once daily</td>
                                <td>
                                    <span class="status-badge navy" onclick="toggleMedStatus(this, 3, 'Atorvastatin')">
                                        <span class="status-dot navy"></span>
                                        Pending
                                    </span>
                                </td>
                                <td>
                                    <span class="status-badge teal">None reported</span>
                                </td>
                                <td>Primary Care Provider</td>
                                <td>
                                    <div class="table-actions">
                                        <button class="action-btn" onclick="openSideEffectModal('Atorvastatin')">📝 Log</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-med-id="4">
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Aspirin</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">81mg</td>
                                <td class="editable-cell" onclick="makeEditable(this)">8:00 AM</td>
                                <td>Once daily</td>
                                <td>
                                    <span class="status-badge red" onclick="toggleMedStatus(this, 4, 'Aspirin')">
                                        <span class="status-dot red"></span>
                                        Missed
                                    </span>
                                </td>
                                <td>
                                    <span class="status-badge teal">None reported</span>
                                </td>
                                <td>Dr. Brown</td>
                                <td>
                                    <div class="table-actions">
                                        <button class="action-btn" onclick="openSideEffectModal('Aspirin')">📝 Log</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="table-pagination">
                    <div class="pagination-info">Showing 1-4 of 4</div>
                    <div class="pagination-controls">
                        <button class="pagination-btn" disabled>← Previous</button>
                        <button class="pagination-btn active">1</button>
                        <button class="pagination-btn" disabled>Next →</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vitals Page -->
        <div class="page-container" id="page-vitals">
            <div class="page-header-section">
                <h1 class="page-main-title">Vitals Tracking</h1>
                <p class="page-description">Monitor blood pressure, blood glucose, and other health metrics</p>
            </div>

            <div class="data-entry-guide">
                <div class="guide-icon">🩺</div>
                <div class="guide-content">
                    <div class="guide-title">How to Log Your Vitals</div>
                    <div class="guide-text">Click "Log Reading" to record new measurements. Double-click any cell to edit values. Data automatically feeds into your analytics dashboard and alerts system.</div>
                    <div class="guide-steps">
                        <div class="guide-step" onclick="demonstrateLogReading()">
                            <div class="step-number">1</div>
                            <div class="step-text">Log new readings</div>
                        </div>
                        <div class="guide-step" onclick="demonstrateInlineEdit()">
                            <div class="step-number">2</div>
                            <div class="step-text">Edit inline if needed</div>
                        </div>
                        <div class="guide-step" onclick="demonstrateTrends()">
                            <div class="step-number">3</div>
                            <div class="step-text">Monitor trends</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="custom-table-container">
                <div class="custom-table-header">
                    <h3 class="custom-table-title">Blood Pressure Log</h3>
                    
                    <div class="table-controls">
                        <div class="table-search">
                            <span class="table-search-icon">🔍</span>
                            <input type="text" class="table-search-input" placeholder="Search readings...">
                        </div>

                        <button class="table-btn" onclick="showToast('Export feature')">
                            📥 Export
                        </button>

                        <button class="table-btn-primary" onclick="openBPModal()">
                            ➕ Log Reading
                        </button>
                    </div>
                </div>

                <div class="custom-table-wrapper">
                    <table class="custom-table" id="bpTable">
                        <thead>
                            <tr>
                                <th><input type="checkbox" class="table-checkbox"></th>
                                <th class="sortable">Date & Time</th>
                                <th class="sortable">Systolic</th>
                                <th class="sortable">Diastolic</th>
                                <th class="sortable">Heart Rate</th>
                                <th class="sortable">Position</th>
                                <th class="sortable">Meds Taken</th>
                                <th class="sortable">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Today, 3:45 PM</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">152</td>
                                <td class="editable-cell" onclick="makeEditable(this)">95</td>
                                <td class="editable-cell" onclick="makeEditable(this)">78 BPM</td>
                                <td>Sitting</td>
                                <td>Yes</td>
                                <td>
                                    <span class="status-badge red">
                                        <span class="status-dot red"></span>
                                        High
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Today, 7:30 AM</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">128</td>
                                <td class="editable-cell" onclick="makeEditable(this)">82</td>
                                <td class="editable-cell" onclick="makeEditable(this)">72 BPM</td>
                                <td>Sitting</td>
                                <td>Yes</td>
                                <td>
                                    <span class="status-badge green">
                                        <span class="status-dot green"></span>
                                        Normal
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Yesterday, 7:15 AM</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">132</td>
                                <td class="editable-cell" onclick="makeEditable(this)">85</td>
                                <td class="editable-cell" onclick="makeEditable(this)">75 BPM</td>
                                <td>Sitting</td>
                                <td>Yes</td>
                                <td>
                                    <span class="status-badge orange">
                                        <span class="status-dot orange"></span>
                                        Elevated
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="table-pagination">
                    <div class="pagination-info">Showing 1-3 of 3</div>
                    <div class="pagination-controls">
                        <button class="pagination-btn" disabled>← Previous</button>
                        <button class="pagination-btn active">1</button>
                        <button class="pagination-btn" disabled>Next →</button>
                    </div>
                </div>
            </div>

            <div class="custom-table-container" style="margin-top: 24px;">
                <div class="custom-table-header">
                    <h3 class="custom-table-title">Blood Glucose Log</h3>
                    
                    <div class="table-controls">
                        <div class="table-search">
                            <span class="table-search-icon">🔍</span>
                            <input type="text" class="table-search-input" placeholder="Search readings...">
                        </div>

                        <button class="table-btn" onclick="showToast('Export feature')">
                            📥 Export
                        </button>

                        <button class="table-btn-primary" onclick="openGlucoseModal()">
                            ➕ Log Reading
                        </button>
                    </div>
                </div>

                <div class="custom-table-wrapper">
                    <table class="custom-table" id="glucoseTable">
                        <thead>
                            <tr>
                                <th><input type="checkbox" class="table-checkbox"></th>
                                <th class="sortable">Date & Time</th>
                                <th class="sortable">Reading (mg/dL)</th>
                                <th class="sortable">Context</th>
                                <th class="sortable">Meal Notes</th>
                                <th class="sortable">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Today, 11:45 AM</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">118</td>
                                <td>Pre-lunch</td>
                                <td class="editable-cell" onclick="makeEditable(this)">—</td>
                                <td>
                                    <span class="status-badge green">
                                        <span class="status-dot green"></span>
                                        In Range
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Today, 7:00 AM</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">95</td>
                                <td>Fasting</td>
                                <td class="editable-cell" onclick="makeEditable(this)">—</td>
                                <td>
                                    <span class="status-badge green">
                                        <span class="status-dot green"></span>
                                        In Range
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Yesterday, 2:00 PM</strong></td>
                                <td class="editable-cell" onclick="makeEditable(this)">165</td>
                                <td>Post-meal</td>
                                <td class="editable-cell" onclick="makeEditable(this)">Pasta lunch</td>
                                <td>
                                    <span class="status-badge orange">
                                        <span class="status-dot orange"></span>
                                        Elevated
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="table-pagination">
                    <div class="pagination-info">Showing 1-3 of 3</div>
                    <div class="pagination-controls">
                        <button class="pagination-btn" disabled>← Previous</button>
                        <button class="pagination-btn active">1</button>
                        <button class="pagination-btn" disabled>Next →</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Journal Page -->
        <div class="page-container" id="page-journal">
            <div class="page-header-section">
                <h1 class="page-main-title">Care Journal</h1>
                <p class="page-description">Document your daily health experiences</p>
            </div>

            <div class="custom-table-container">
                <div class="custom-table-header">
                    <h3 class="custom-table-title">Recent Entries</h3>
                    <div class="table-controls">
                        <button class="table-btn-primary" onclick="openJournalModal()">+ New Entry</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="activity-list" id="journalEntriesList">
                        <div class="activity-item" style="flex-direction: column; align-items: flex-start; padding: 24px;">
                            <div style="display: flex; justify-content: space-between; width: 100%; margin-bottom: 12px;">
                                <div>
                                    <div class="activity-title" style="font-size: 18px; margin-bottom: 4px;">Feeling Great Today</div>
                                    <div class="activity-meta">Today at 9:00 AM</div>
                                </div>
                                <span class="status-badge teal">😊 Good</span>
                            </div>
                            <p style="color: var(--text-dark); line-height: 1.6;">
                                Woke up feeling refreshed and energized.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reminders Page -->
        <div class="page-container" id="page-reminders">
            <div class="page-header-section">
                <h1 class="page-main-title">Reminders</h1>
                <p class="page-description">Stay on top of your health tasks with custom reminders</p>
            </div>

            <div class="stats-grid" style="margin-bottom: 32px;">
                <div class="stat-card">
                    <div class="stat-icon teal">⏰</div>
                    <div class="stat-content">
                        <div class="stat-label">Active Reminders</div>
                        <div class="stat-value" id="activeRemindersCount">3</div>
                        <div class="stat-change positive">
                            <span>✓</span>
                            <span>All set up</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon peach">🔔</div>
                    <div class="stat-content">
                        <div class="stat-label">Today's Reminders</div>
                        <div class="stat-value" id="todayRemindersCount">2</div>
                        <div class="stat-change attention">
                            <span>⚠</span>
                            <span>Due soon</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="custom-table-container">
                <div class="custom-table-header">
                    <h3 class="custom-table-title">Your Reminders</h3>
                    <div class="table-controls">
                        <button class="table-btn-primary" onclick="openAddReminderModal()">+ Create Reminder</button>
                    </div>
                </div>
                <div class="card-body">
                    <table class="custom-table">
                        <thead>
                            <tr>
                                <th>Reminder</th>
                                <th>Type</th>
                                <th>Schedule</th>
                                <th>Next Due</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="remindersTable">
                            <tr>
                                <td><strong>Take Morning Medication</strong></td>
                                <td>
                                    <span style="display: inline-flex; align-items: center; gap: 6px;">
                                        💊 Medication
                                    </span>
                                </td>
                                <td>Daily at 8:00 AM</td>
                                <td>Tomorrow, 8:00 AM</td>
                                <td>
                                    <span class="status-badge teal">
                                        <span class="status-dot teal"></span>
                                        Active
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 8px 16px; font-size: 13px;">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Check Blood Pressure</strong></td>
                                <td>
                                    <span style="display: inline-flex; align-items: center; gap: 6px;">
                                        📈 Vitals
                                    </span>
                                </td>
                                <td>Every Monday & Thursday at 7:00 AM</td>
                                <td>Thursday, 7:00 AM</td>
                                <td>
                                    <span class="status-badge teal">
                                        <span class="status-dot teal"></span>
                                        Active
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 8px 16px; font-size: 13px;">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Appointment with Primary Care Provider</strong></td>
                                <td>
                                    <span style="display: inline-flex; align-items: center; gap: 6px;">
                                        📅 Appointment
                                    </span>
                                </td>
                                <td>One-time: Tomorrow at 1:30 PM</td>
                                <td>Tomorrow, 1:30 PM</td>
                                <td>
                                    <span class="status-badge peach">
                                        <span class="status-dot peach"></span>
                                        Upcoming
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 8px 16px; font-size: 13px;">Edit</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Appointments Page -->
        <div class="page-container" id="page-appointments">
            <div class="page-header-section">
                <h1 class="page-main-title">Appointments</h1>
                <p class="page-description">View and manage your medical appointments</p>
            </div>

            <div class="data-entry-guide">
                <div class="guide-icon">📅</div>
                <div class="guide-content">
                    <div class="guide-title">How to Manage Appointments</div>
                    <div class="guide-text">Schedule appointments, confirm transportation, and set reminders. Click transportation status to update arrangements. All appointments sync with your calendar.</div>
                    <div class="guide-steps">
                        <div class="guide-step" onclick="demonstrateSchedule()">
                            <div class="step-number">1</div>
                            <div class="step-text">Schedule new visits</div>
                        </div>
                        <div class="guide-step" onclick="demonstrateTransportation()">
                            <div class="step-number">2</div>
                            <div class="step-text">Confirm transportation</div>
                        </div>
                        <div class="guide-step" onclick="demonstrateReminders()">
                            <div class="step-number">3</div>
                            <div class="step-text">Get reminders</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="custom-table-container">
                <div class="custom-table-header">
                    <h3 class="custom-table-title">Upcoming Appointments</h3>
                    <div class="table-controls">
                        <button class="table-btn-primary" onclick="openAddAppointmentModal()">+ New Appointment</button>
                    </div>
                </div>
                <div class="card-body">
                    <table class="custom-table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" class="table-checkbox"></th>
                                <th class="sortable">Provider</th>
                                <th class="sortable">Type</th>
                                <th class="sortable">Date & Time</th>
                                <th class="sortable">Location</th>
                                <th class="sortable">Transportation</th>
                                <th class="sortable">Status</th>
                            </tr>
                        </thead>
                        <tbody id="appointmentsTable">
                            <tr>
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Healthcare Provider</strong></td>
                                <td>Annual Checkup</td>
                                <td class="editable-cell" onclick="makeEditable(this)">Tomorrow, 2:00 PM</td>
                                <td>Medical Plaza 123</td>
                                <td>
                                    <span class="status-badge green">
                                        <span class="status-dot green"></span>
                                        Family (Confirmed)
                                    </span>
                                </td>
                                <td>
                                    <span class="status-badge teal">
                                        <span class="status-dot teal"></span>
                                        Scheduled
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Dr. Michael Chen</strong></td>
                                <td>Follow-up</td>
                                <td class="editable-cell" onclick="makeEditable(this)">Oct 20, 10:30 AM</td>
                                <td>Heart Center</td>
                                <td>
                                    <span class="status-badge orange">
                                        <span class="status-dot orange"></span>
                                        Rideshare (Pending)
                                    </span>
                                </td>
                                <td>
                                    <span class="status-badge teal">
                                        <span class="status-dot teal"></span>
                                        Scheduled
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="table-checkbox"></td>
                                <td><strong>Dr. Emily Martinez</strong></td>
                                <td>Lab Work</td>
                                <td class="editable-cell" onclick="makeEditable(this)">Oct 25, 8:00 AM</td>
                                <td>Lab Services Bldg</td>
                                <td>
                                    <span class="status-badge navy">
                                        <span class="status-dot navy"></span>
                                        Self-driving
                                    </span>
                                </td>
                                <td>
                                    <span class="status-badge teal">
                                        <span class="status-dot teal"></span>
                                        Scheduled
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Care Team Page -->
        <div class="page-container" id="page-team">
            <div class="page-header-section">
                <h1 class="page-main-title">Care Team</h1>
                <p class="page-description">Manage your healthcare providers</p>
            </div>

            <div class="custom-table-container">
                <div class="custom-table-header">
                    <h3 class="custom-table-title">Healthcare Providers</h3>
                    <div class="table-controls">
                        <button class="table-btn-primary" onclick="openAddProviderModal()">+ Add Provider</button>
                    </div>
                </div>
                <div class="card-body">
                    <table class="custom-table">
                        <thead>
                            <tr>
                                <th>Provider Name</th>
                                <th>Specialty</th>
                                <th>Practice</th>
                                <th>Phone</th>
                            </tr>
                        </thead>
                        <tbody id="careTeamTable">
                            <tr>
                                <td><strong>Healthcare Provider</strong></td>
                                <td>Primary Care</td>
                                <td>Medical Plaza 123</td>
                                <td>(555) 123-4567</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Records Page -->
        <div class="page-container" id="page-records">
            <div class="page-header-section">
                <h1 class="page-main-title">Medical Records</h1>
                <p class="page-description">Access your medical history</p>
            </div>

            <div class="custom-table-container">
                <div class="custom-table-header">
                    <h3 class="custom-table-title">Recent Lab Results</h3>
                    <div class="table-controls">
                        <button class="table-btn-primary" onclick="openUploadRecordModal()">+ Upload Results</button>
                    </div>
                </div>
                <div class="card-body">
                    <table class="custom-table">
                        <thead>
                            <tr>
                                <th>Test Name</th>
                                <th>Date</th>
                                <th>Result</th>
                                <th>Ordered By</th>
                            </tr>
                        </thead>
                        <tbody id="labResultsTable">
                            <tr>
                                <td><strong>Complete Blood Count</strong></td>
                                <td>Sep 20, 2024</td>
                                <td>Normal</td>
                                <td>Primary Care Provider</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Analytics Page -->
        <div class="page-container" id="page-analytics">
            <div class="page-header-section">
                <h1 class="page-main-title">Health Analytics</h1>
                <p class="page-description">View trends, insights, and comprehensive health reports</p>
            </div>

            <div class="data-entry-guide">
                <div class="guide-icon">📊</div>
                <div class="guide-content">
                    <div class="guide-title">Understanding Your Health Dashboard</div>
                    <div class="guide-text">All data from medications, vitals, and appointments feeds into this analytics dashboard. View trends over time, identify patterns, and share reports with your healthcare providers.</div>
                    <div class="guide-steps">
                        <div class="guide-step" onclick="demonstrateAggregation()">
                            <div class="step-number">1</div>
                            <div class="step-text">Auto-aggregated data</div>
                        </div>
                        <div class="guide-step" onclick="demonstrateAnalysis()">
                            <div class="step-number">2</div>
                            <div class="step-text">Trend analysis</div>
                        </div>
                        <div class="guide-step" onclick="demonstrateExport()">
                            <div class="step-number">3</div>
                            <div class="step-text">Exportable reports</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="quote-banner">
                <div class="quote-icon">💚</div>
                <div class="quote-content">
                    <div class="quote-text">"Your health is an investment, not an expense. Every measurement brings you closer to wellness."</div>
                    <div class="quote-author">— Your EmberMate Team</div>
                </div>
            </div>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-icon" style="background: linear-gradient(135deg, var(--success-green), #059669);">✓</div>
                    <div class="metric-content">
                        <div class="metric-value">94%</div>
                        <div class="metric-label">Medication Adherence</div>
                        <div class="metric-trend positive">↑ 12% from last month</div>
                        <div class="metric-target">Target: 90% | Status: Excellent</div>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon" style="background: linear-gradient(135deg, var(--primary-teal), var(--primary-teal-dark));">📈</div>
                    <div class="metric-content">
                        <div class="metric-value">128/82</div>
                        <div class="metric-label">Avg Blood Pressure</div>
                        <div class="metric-trend positive">↓ 6 points systolic</div>
                        <div class="metric-target">Target: <130/85 | Status: Good</div>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon" style="background: linear-gradient(135deg, var(--warning-orange), #D97706);">🩸</div>
                    <div class="metric-content">
                        <div class="metric-value">112</div>
                        <div class="metric-label">Avg Glucose (mg/dL)</div>
                        <div class="metric-trend positive">↓ 8 mg/dL</div>
                        <div class="metric-target">Target: 80-130 | Status: In Range</div>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon" style="background: linear-gradient(135deg, var(--secondary-navy), var(--secondary-navy-dark));">📅</div>
                    <div class="metric-content">
                        <div class="metric-value">100%</div>
                        <div class="metric-label">Appointment Attendance</div>
                        <div class="metric-trend neutral">→ Maintained</div>
                        <div class="metric-target">Last 6 months: 0 missed</div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <div class="chart-title-section">
                        <h3 class="chart-title">Blood Pressure Trends</h3>
                        <p class="chart-subtitle">Last 30 days • Target: <130/85</p>
                    </div>
                    <div class="chart-controls">
                        <button class="chart-btn active" onclick="updateChartRange('7d')">7 Days</button>
                        <button class="chart-btn" onclick="updateChartRange('30d')">30 Days</button>
                        <button class="chart-btn" onclick="updateChartRange('90d')">90 Days</button>
                        <button class="table-btn" onclick="showToast('Exporting BP chart...')">📥 Export</button>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="bpChart" style="max-height: 300px;"></canvas>
                </div>
                <div class="chart-insights">
                    <div class="insight-item">
                        <span class="insight-icon" style="color: var(--success-green);">✓</span>
                        <span class="insight-text"><strong>Positive Trend:</strong> Your systolic BP decreased by 8 points over 30 days</span>
                    </div>
                    <div class="insight-item">
                        <span class="insight-icon" style="color: var(--primary-teal);">ℹ</span>
                        <span class="insight-text"><strong>Pattern Detected:</strong> Lower readings correlate with morning medication adherence</span>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <div class="chart-title-section">
                        <h3 class="chart-title">Blood Glucose Trends</h3>
                        <p class="chart-subtitle">Last 30 days • Target: 80-130 mg/dL (fasting/pre-meal)</p>
                    </div>
                    <div class="chart-controls">
                        <button class="chart-btn active" onclick="updateGlucoseRange('7d')">7 Days</button>
                        <button class="chart-btn" onclick="updateGlucoseRange('30d')">30 Days</button>
                        <button class="chart-btn" onclick="updateGlucoseRange('90d')">90 Days</button>
                        <button class="table-btn" onclick="showToast('Exporting glucose chart...')">📥 Export</button>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="glucoseChart" style="max-height: 300px;"></canvas>
                </div>
                <div class="chart-insights">
                    <div class="insight-item">
                        <span class="insight-icon" style="color: var(--warning-orange);">⚠</span>
                        <span class="insight-text"><strong>Food Correlation:</strong> Pasta meals consistently spike glucose by 40-50 mg/dL</span>
                    </div>
                    <div class="insight-item">
                        <span class="insight-icon" style="color: var(--success-green);">✓</span>
                        <span class="insight-text"><strong>Time of Day:</strong> Morning fasting readings are consistently in target range</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div class="page-container" id="page-settings">
            <div class="page-header-section">
                <h1 class="page-main-title">Settings</h1>
                <p class="page-description">Manage your account</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Profile Information</h3>
                    <span class="card-action" onclick="openEditProfileModal()">Edit →</span>
                </div>
                <div class="card-body">
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon" style="background: linear-gradient(135deg, rgba(45, 155, 155, 0.15), rgba(45, 155, 155, 0.25));">👤</div>
                            <div class="activity-content">
                                <div class="activity-title" id="profileName">User Name</div>
                                <div class="activity-meta" id="profileEmail">jane.smith@email.com</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Undo Toast -->
    <div class="undo-toast" id="undoToast">
        <div class="undo-toast-content">
            <strong id="undoMessage">Medication marked as taken</strong>
        </div>
        <button class="undo-btn" onclick="undoStatusChange()">↩ Undo</button>
    </div>

    <!-- Side Effect Modal -->
    <div class="modal-overlay" id="sideEffectModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Report Side Effect</h2>
                    <p class="modal-subtitle" id="sideEffectMedName">Medication Name</p>
                </div>
                <div class="modal-close" onclick="closeSideEffectModal()">×</div>
            </div>
            <div class="modal-body">
                <form onsubmit="submitSideEffect(event)">
                    <div class="form-group">
                        <label class="form-label">Severity</label>
                        <div class="severity-selector">
                            <div class="severity-option mild" onclick="selectSeverity('mild', event)">
                                Mild
                            </div>
                            <div class="severity-option moderate" onclick="selectSeverity('moderate', event)">
                                Moderate
                            </div>
                            <div class="severity-option severe" onclick="selectSeverity('severe', event)">
                                Severe
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Type of Side Effect</label>
                        <select class="form-select" required>
                            <option value="">Select type...</option>
                            <option value="nausea">Nausea</option>
                            <option value="dizziness">Dizziness</option>
                            <option value="headache">Headache</option>
                            <option value="rash">Rash / Skin Reaction</option>
                            <option value="fatigue">Fatigue</option>
                            <option value="stomach">Stomach Pain</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-textarea" placeholder="Describe the side effect and when it occurred..." required></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeSideEffectModal()">Cancel</button>
                        <button type="submit" class="btn-primary">Submit Report</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- BP Reading Modal -->
    <div class="modal-overlay" id="bpModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Log Blood Pressure</h2>
                    <p class="modal-subtitle">Record your BP reading</p>
                </div>
                <div class="modal-close" onclick="closeBPModal()">×</div>
            </div>
            <div class="modal-body">
                <form onsubmit="submitBP(event)">
                    <div class="form-group">
                        <label class="form-label">Systolic</label>
                        <input type="number" class="form-input" placeholder="120" required min="70" max="250">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Diastolic</label>
                        <input type="number" class="form-input" placeholder="80" required min="40" max="150">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Heart Rate (BPM)</label>
                        <input type="number" class="form-input" placeholder="72" required min="40" max="200">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Position</label>
                        <select class="form-select" required>
                            <option value="sitting">Sitting</option>
                            <option value="standing">Standing</option>
                            <option value="lying">Lying Down</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Medication Taken Today?</label>
                        <select class="form-select" required>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeBPModal()">Cancel</button>
                        <button type="submit" class="btn-primary">Save Reading</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Glucose Reading Modal -->
    <div class="modal-overlay" id="glucoseModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Log Blood Glucose</h2>
                    <p class="modal-subtitle">Record your glucose reading</p>
                </div>
                <div class="modal-close" onclick="closeGlucoseModal()">×</div>
            </div>
            <div class="modal-body">
                <form onsubmit="submitGlucose(event)">
                    <div class="form-group">
                        <label class="form-label">Reading (mg/dL)</label>
                        <input type="number" class="form-input" placeholder="100" required min="20" max="600">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Context</label>
                        <select class="form-select" required>
                            <option value="">Select context...</option>
                            <option value="fasting">Fasting</option>
                            <option value="pre-meal">Before Meal</option>
                            <option value="post-meal">After Meal (2 hours)</option>
                            <option value="bedtime">Bedtime</option>
                            <option value="random">Random</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Meal Notes (Optional)</label>
                        <input type="text" class="form-input" placeholder="What did you eat?">
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeGlucoseModal()">Cancel</button>
                        <button type="submit" class="btn-primary">Save Reading</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Log Medication Modal -->
    <div class="modal-overlay" id="logMedicationModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Log Medication</h2>
                    <p class="modal-subtitle">Record that you've taken your medication</p>
                </div>
                <div class="modal-close" onclick="closeModal('logMedicationModal')">×</div>
            </div>
            <div class="modal-body">
                <form id="logMedicationForm" onsubmit="submitLogMedication(event)">
                    <div class="form-group">
                        <label class="form-label">Medication Name</label>
                        <select class="form-select" id="medName" required>
                            <option value="">Select medication...</option>
                            <option value="Lisinopril">Lisinopril</option>
                            <option value="Metformin">Metformin</option>
                            <option value="Atorvastatin">Atorvastatin</option>
                            <option value="Aspirin">Aspirin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Time Taken</label>
                        <input type="time" class="form-input" id="medTime" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notes (Optional)</label>
                        <textarea class="form-textarea" id="medNotes" placeholder="Any side effects or observations..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('logMedicationModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Log Medication</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Record Vitals Modal -->
    <div class="modal-overlay" id="recordVitalsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Record Vitals</h2>
                    <p class="modal-subtitle">Log your health measurements</p>
                </div>
                <div class="modal-close" onclick="closeModal('recordVitalsModal')">×</div>
            </div>
            <div class="modal-body">
                <form id="recordVitalsForm" onsubmit="submitVitals(event)">
                    <div class="form-group">
                        <label class="form-label">Blood Pressure (Systolic/Diastolic)</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                            <input type="number" class="form-input" id="bpSystolic" placeholder="120" min="70" max="200">
                            <input type="number" class="form-input" id="bpDiastolic" placeholder="80" min="40" max="130">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Heart Rate (BPM)</label>
                        <input type="number" class="form-input" id="heartRate" placeholder="72" min="40" max="200">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Weight (lbs)</label>
                        <input type="number" class="form-input" id="weight" placeholder="165" min="50" max="500">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('recordVitalsModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Record Vitals</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Journal Entry Modal -->
    <div class="modal-overlay" id="journalModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">New Journal Entry</h2>
                    <p class="modal-subtitle">Document your health experience</p>
                </div>
                <div class="modal-close" onclick="closeModal('journalModal')">×</div>
            </div>
            <div class="modal-body">
                <form id="journalForm" onsubmit="submitJournal(event)">
                    <div class="form-group">
                        <label class="form-label">Title</label>
                        <input type="text" class="form-input" id="journalTitle" required placeholder="How are you feeling today?">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Entry</label>
                        <textarea class="form-textarea" id="journalEntry" required placeholder="Describe your day, symptoms, mood, or any observations..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Mood</label>
                        <select class="form-select" id="journalMood" required>
                            <option value="">Select mood...</option>
                            <option value="😊 Good">😊 Good</option>
                            <option value="😐 Neutral">😐 Neutral</option>
                            <option value="😔 Low">😔 Low</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('journalModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Save Entry</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Medication Modal -->
    <div class="modal-overlay" id="addMedicationModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Add Medication</h2>
                    <p class="modal-subtitle">Add a new medication to your list</p>
                </div>
                <div class="modal-close" onclick="closeModal('addMedicationModal')">×</div>
            </div>
            <div class="modal-body">
                <form id="addMedicationForm" onsubmit="submitAddMedication(event)">
                    <div class="form-group">
                        <label class="form-label">Medication Name</label>
                        <input type="text" class="form-input" id="newMedName" required placeholder="e.g., Aspirin">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Dosage</label>
                        <input type="text" class="form-input" id="newMedDosage" required placeholder="e.g., 10mg">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Frequency</label>
                        <input type="text" class="form-input" id="newMedFrequency" required placeholder="e.g., Once daily">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Prescribed By</label>
                        <input type="text" class="form-input" id="newMedPrescriber" required placeholder="e.g., Specialist">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('addMedicationModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Add Medication</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Appointment Modal -->
    <div class="modal-overlay" id="addAppointmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">New Appointment</h2>
                    <p class="modal-subtitle">Schedule a medical appointment</p>
                </div>
                <div class="modal-close" onclick="closeModal('addAppointmentModal')">×</div>
            </div>
            <div class="modal-body">
                <form id="addAppointmentForm" onsubmit="submitAddAppointment(event)">
                    <div class="form-group">
                        <label class="form-label">Provider</label>
                        <input type="text" class="form-input" id="apptProvider" required placeholder="e.g., Primary Care Provider">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Appointment Type</label>
                        <input type="text" class="form-input" id="apptType" required placeholder="e.g., Annual Checkup">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Date & Time</label>
                        <input type="datetime-local" class="form-input" id="apptDateTime" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Location</label>
                        <input type="text" class="form-input" id="apptLocation" required placeholder="e.g., Medical Plaza 123">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('addAppointmentModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Schedule</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Provider Modal -->
    <div class="modal-overlay" id="addProviderModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Add Provider</h2>
                    <p class="modal-subtitle">Add to your care team</p>
                </div>
                <div class="modal-close" onclick="closeModal('addProviderModal')">×</div>
            </div>
            <div class="modal-body">
                <form id="addProviderForm" onsubmit="submitAddProvider(event)">
                    <div class="form-group">
                        <label class="form-label">Provider Name</label>
                        <input type="text" class="form-input" id="providerName" required placeholder="e.g., Healthcare Professional">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Specialty</label>
                        <input type="text" class="form-input" id="providerSpecialty" required placeholder="e.g., Cardiology">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Practice/Clinic</label>
                        <input type="text" class="form-input" id="providerPractice" required placeholder="e.g., Heart Center">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-input" id="providerPhone" required placeholder="(555) 123-4567">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('addProviderModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Add Provider</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Upload Record Modal -->
    <div class="modal-overlay" id="uploadRecordModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Upload Lab Results</h2>
                    <p class="modal-subtitle">Add medical records</p>
                </div>
                <div class="modal-close" onclick="closeModal('uploadRecordModal')">×</div>
            </div>
            <div class="modal-body">
                <form id="uploadRecordForm" onsubmit="submitUploadRecord(event)">
                    <div class="form-group">
                        <label class="form-label">Test Name</label>
                        <input type="text" class="form-input" id="testName" required placeholder="e.g., Blood Panel">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-input" id="testDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Result/Summary</label>
                        <input type="text" class="form-input" id="testResult" required placeholder="e.g., Normal">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ordered By</label>
                        <input type="text" class="form-input" id="testOrderedBy" required placeholder="e.g., Primary Care Provider">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('uploadRecordModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Upload</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal-overlay" id="editProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Edit Profile</h2>
                    <p class="modal-subtitle">Update your information</p>
                </div>
                <div class="modal-close" onclick="closeModal('editProfileModal')">×</div>
            </div>
            <div class="modal-body">
                <form id="editProfileForm" onsubmit="submitEditProfile(event)">
                    <div class="form-group">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-input" id="editName" value="User Name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="editEmail" value="jane.smith@email.com" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('editProfileModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notifications Modal -->
    <div class="modal-overlay" id="notificationsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Notifications</h2>
                    <p class="modal-subtitle">Stay updated on your health activities</p>
                </div>
                <div class="modal-close" onclick="closeModal('notificationsModal')">×</div>
            </div>
            <div class="modal-body">
                <div class="activity-list">
                    <div class="activity-item">
                        <div class="activity-icon" style="background: linear-gradient(135deg, rgba(255, 179, 71, 0.15), rgba(255, 179, 71, 0.25));">💊</div>
                        <div class="activity-content">
                            <div class="activity-title">Medication Reminder</div>
                            <div class="activity-meta">Metformin 500mg due at 12:00 PM</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon" style="background: linear-gradient(135deg, rgba(168, 216, 216, 0.15), rgba(168, 216, 216, 0.25));">📅</div>
                        <div class="activity-content">
                            <div class="activity-title">Upcoming Appointment</div>
                            <div class="activity-meta">Primary Care Provider tomorrow at 2:00 PM</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon" style="background: linear-gradient(135deg, rgba(45, 155, 155, 0.15), rgba(45, 155, 155, 0.25));">✨</div>
                        <div class="activity-content">
                            <div class="activity-title">Care Streak Milestone</div>
                            <div class="activity-meta">7 days of consistent logging! Keep it up!</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon" style="background: linear-gradient(135deg, rgba(45, 155, 155, 0.15), rgba(45, 155, 155, 0.25));">📈</div>
                        <div class="activity-content">
                            <div class="activity-title">Weekly Health Summary</div>
                            <div class="activity-meta">Your vitals have been stable this week</div>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 24px; text-align: center;">
                    <button class="btn-secondary" onclick="clearAllNotifications()">Clear All</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Reminder Modal -->
    <div class="modal-overlay" id="addReminderModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">Create Reminder</h2>
                    <p class="modal-subtitle">Set up a custom health reminder</p>
                </div>
                <div class="modal-close" onclick="closeModal('addReminderModal')">×</div>
            </div>
            <div class="modal-body">
                <form id="addReminderForm" onsubmit="submitAddReminder(event)">
                    <div class="form-group">
                        <label class="form-label">Reminder Title</label>
                        <input type="text" class="form-input" id="reminderTitle" required placeholder="e.g., Take morning vitamins">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Reminder Type</label>
                        <select class="form-select" id="reminderType" required>
                            <option value="">Select type...</option>
                            <option value="💊 Medication">💊 Medication</option>
                            <option value="📈 Vitals">📈 Vitals</option>
                            <option value="📅 Appointment">📅 Appointment</option>
                            <option value="💧 Hydration">💧 Hydration</option>
                            <option value="🏃 Exercise">🏃 Exercise</option>
                            <option value="🍎 Nutrition">🍎 Nutrition</option>
                            <option value="😴 Sleep">😴 Sleep</option>
                            <option value="📝 Journal">📝 Journal</option>
                            <option value="✨ Custom">✨ Custom</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Frequency</label>
                        <select class="form-select" id="reminderFrequency" required onchange="updateScheduleFields()">
                            <option value="">Select frequency...</option>
                            <option value="once">One-time</option>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly (specific days)</option>
                            <option value="custom">Custom interval</option>
                        </select>
                    </div>

                    <div class="form-group" id="onceTimeGroup" style="display: none;">
                        <label class="form-label">Date & Time</label>
                        <input type="datetime-local" class="form-input" id="reminderOnceDateTime">
                    </div>

                    <div class="form-group" id="dailyTimeGroup" style="display: none;">
                        <label class="form-label">Time</label>
                        <input type="time" class="form-input" id="reminderDailyTime">
                    </div>

                    <div class="form-group" id="weeklyGroup" style="display: none;">
                        <label class="form-label">Select Days</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px;">
                            <label style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; border: 1px solid rgba(45, 155, 155, 0.2); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" name="weekdays" value="Monday">
                                <span style="font-size: 13px;">Mon</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; border: 1px solid rgba(45, 155, 155, 0.2); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" name="weekdays" value="Tuesday">
                                <span style="font-size: 13px;">Tue</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; border: 1px solid rgba(45, 155, 155, 0.2); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" name="weekdays" value="Wednesday">
                                <span style="font-size: 13px;">Wed</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; border: 1px solid rgba(45, 155, 155, 0.2); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" name="weekdays" value="Thursday">
                                <span style="font-size: 13px;">Thu</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; border: 1px solid rgba(45, 155, 155, 0.2); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" name="weekdays" value="Friday">
                                <span style="font-size: 13px;">Fri</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; border: 1px solid rgba(45, 155, 155, 0.2); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" name="weekdays" value="Saturday">
                                <span style="font-size: 13px;">Sat</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; border: 1px solid rgba(45, 155, 155, 0.2); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" name="weekdays" value="Sunday">
                                <span style="font-size: 13px;">Sun</span>
                            </label>
                        </div>
                        <label class="form-label">Time</label>
                        <input type="time" class="form-input" id="reminderWeeklyTime">
                    </div>

                    <div class="form-group" id="customIntervalGroup" style="display: none;">
                        <label class="form-label">Repeat Every</label>
                        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 12px;">
                            <input type="number" class="form-input" id="reminderCustomInterval" min="1" placeholder="1">
                            <select class="form-select" id="reminderCustomUnit">
                                <option value="hours">Hours</option>
                                <option value="days">Days</option>
                                <option value="weeks">Weeks</option>
                            </select>
                        </div>
                        <label class="form-label" style="margin-top: 16px;">Starting Time</label>
                        <input type="datetime-local" class="form-input" id="reminderCustomStart">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Notes (Optional)</label>
                        <textarea class="form-textarea" id="reminderNotes" placeholder="Add any additional details..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('addReminderModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Create Reminder</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title">EmberMate Guide</h2>
                    <p class="modal-subtitle">Quick tips for using the app</p>
                </div>
                <div class="modal-close" onclick="closeHelpModal()">×</div>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <strong style="display: block; margin-bottom: 8px; color: var(--secondary-navy);">💊 Medications</strong>
                    <p style="color: var(--text-dark); line-height: 1.6;">Track your medication schedule and log side effects using the "Log" button. Click status badges to mark medications as taken - you'll get an undo option if you make a mistake.</p>
                </div>

                <div style="margin-bottom: 20px;">
                    <strong style="display: block; margin-bottom: 8px; color: var(--secondary-navy);">📈 Vitals</strong>
                    <p style="color: var(--text-dark); line-height: 1.6;">Monitor blood pressure and blood glucose levels. The app will alert you if readings exceed your threshold. Double-click cells to edit values inline.</p>
                </div>

                <div style="margin-bottom: 20px;">
                    <strong style="display: block; margin-bottom: 8px; color: var(--secondary-navy);">📅 Appointments</strong>
                    <p style="color: var(--text-dark); line-height: 1.6;">Schedule appointments and coordinate transportation. All data syncs with your calendar and analytics dashboard.</p>
                </div>

                <div style="margin-bottom: 20px;">
                    <strong style="display: block; margin-bottom: 8px; color: var(--secondary-navy);">📊 Analytics</strong>
                    <p style="color: var(--text-dark); line-height: 1.6;">View comprehensive health reports with all your tracked data. Export reports to share with healthcare providers.</p>
                </div>

                <div style="margin-bottom: 20px;">
                    <strong style="display: block; margin-bottom: 8px; color: var(--secondary-navy);">🔔 Alerts</strong>
                    <p style="color: var(--text-dark); line-height: 1.6;">Critical health alerts appear at the top of your dashboard. Always follow the recommended actions.</p>
                </div>

                <div class="form-actions">
                    <button class="btn-primary" onclick="closeHelpModal()">Got It</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
