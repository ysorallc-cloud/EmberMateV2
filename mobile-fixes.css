/* ============================================
   MOBILE FIXES FOR EMBERMATE APP
   Additional CSS to fix mobile display issues
   ============================================ */

/* CRITICAL: Onboarding/Main App Transition Fix */
body.onboarding-active .main-content {
    display: none !important;
}

body.onboarding-active .header {
    display: none !important;
}

/* Show onboarding when active */
body.onboarding-active .onboarding-container {
    display: block !important;
}

/* Hide onboarding when not active */
body:not(.onboarding-active) .onboarding-container {
    display: none !important;
}

/* ============================================
   ENHANCED MOBILE TEXT HANDLING
   ============================================ */

/* Prevent text overflow on all text elements */
.stat-label,
.stat-value,
.stat-unit,
.med-name,
.med-dosage,
.appointment-title,
.appointment-time,
.goal-title,
.widget-title {
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
}

/* ============================================
   IMPROVED STAT CARD MOBILE LAYOUT
   ============================================ */

@media (max-width: 480px) {
    .stat-card {
        /* Ensure proper alignment */
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: flex-start;
        padding: 0.5rem;
        gap: 0.375rem;
    }
    
    .stat-icon {
        width: 36px;
        height: 36px;
        font-size: 1.3rem;
        flex-shrink: 0;
    }
    
    .stat-info {
        display: flex;
        flex-direction: column;
        gap: 1px;
        flex: 1;
        min-width: 0;
        overflow: hidden;
    }
    
    .stat-label {
        font-size: 0.6rem;
        line-height: 1.1;
        margin-bottom: 0;
    }
    
    .stat-value {
        font-size: 0.95rem;
        line-height: 1.1;
    }
    
    .stat-unit {
        font-size: 0.6rem;
        line-height: 1.1;
        margin-top: 0;
    }
}

/* Extra small devices */
@media (max-width: 375px) {
    .stat-card {
        padding: 0.4rem;
        gap: 0.3rem;
    }
    
    .stat-icon {
        width: 32px;
        height: 32px;
        font-size: 1.1rem;
    }
    
    .stat-label {
        font-size: 0.55rem;
    }
    
    .stat-value {
        font-size: 0.85rem;
    }
    
    .stat-unit {
        font-size: 0.55rem;
    }
}

/* Very small devices (iPhone SE, etc.) */
@media (max-width: 360px) {
    .stat-card {
        padding: 0.35rem;
        gap: 0.25rem;
    }
    
    .stat-icon {
        width: 30px;
        height: 30px;
        font-size: 1rem;
    }
    
    .stat-label {
        font-size: 0.5rem;
    }
    
    .stat-value {
        font-size: 0.8rem;
    }
    
    .stat-unit {
        font-size: 0.5rem;
    }
}

/* ============================================
   STATS GRID MOBILE OPTIMIZATION
   ============================================ */

@media (max-width: 600px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
    }
}

@media (max-width: 480px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.4rem;
    }
}

@media (max-width: 375px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.35rem;
    }
}

/* ============================================
   WIDGET HEADER MOBILE FIX
   ============================================ */

@media (max-width: 480px) {
    .widget-header {
        margin-bottom: 0.75rem;
    }
    
    .widget-title {
        font-size: 1rem;
        line-height: 1.2;
    }
    
    .widget-icon {
        font-size: 1.25rem;
    }
}

@media (max-width: 375px) {
    .widget-title {
        font-size: 0.95rem;
    }
}

/* ============================================
   WELCOME SECTION MOBILE FIX
   ============================================ */

@media (max-width: 480px) {
    .welcome-title {
        font-size: 1.15rem;
        line-height: 1.3;
    }
    
    .welcome-subtitle {
        font-size: 0.9rem;
        line-height: 1.3;
    }
}

/* ============================================
   MEDICATION LIST MOBILE FIX
   ============================================ */

@media (max-width: 480px) {
    .medication-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }
    
    .med-info {
        width: 100%;
    }
    
    .med-taken {
        width: 100%;
        justify-content: space-between;
    }
}

/* ============================================
   APPOINTMENT MOBILE FIX
   ============================================ */

@media (max-width: 480px) {
    .appointment-item {
        gap: 0.5rem;
    }
    
    .appointment-date {
        min-width: 45px;
        padding: 0.35rem;
    }
    
    .appointment-day {
        font-size: 1.1rem;
    }
    
    .appointment-month {
        font-size: 0.65rem;
    }
}

/* ============================================
   BUTTON MOBILE OPTIMIZATION
   ============================================ */

@media (max-width: 480px) {
    .btn-log-vitals {
        font-size: 0.95rem;
        padding: 0.75rem 1rem;
    }
    
    .btn-log-vitals .btn-icon {
        font-size: 1.15rem;
    }
}

/* ============================================
   CHART MOBILE RESPONSIVENESS
   ============================================ */

@media (max-width: 480px) {
    .vitals-chart canvas {
        max-height: 200px !important;
    }
}

/* ============================================
   MODAL MOBILE FIX
   ============================================ */

@media (max-width: 480px) {
    .modal-content {
        width: 95%;
        max-height: 90vh;
        padding: 1rem;
    }
    
    .modal-header {
        padding-bottom: 0.75rem;
    }
    
    .modal-header h3 {
        font-size: 1.1rem;
    }
    
    .modal-body {
        padding: 0.75rem 0;
    }
}

/* ============================================
   FORM ELEMENTS MOBILE FIX
   ============================================ */

@media (max-width: 480px) {
    .form-group label {
        font-size: 0.85rem;
    }
    
    .form-input,
    .form-select,
    .form-textarea {
        font-size: 0.9rem;
        padding: 0.6rem;
    }
}

/* ============================================
   STREAK WIDGET MOBILE FIX
   ============================================ */

@media (max-width: 480px) {
    .streak-fire {
        font-size: 2.5rem;
    }
    
    .streak-number {
        font-size: 2.5rem;
    }
    
    .streak-label {
        font-size: 0.9rem;
    }
    
    .streak-message {
        font-size: 0.85rem;
    }
}

/* ============================================
   INSIGHTS MOBILE FIX
   ============================================ */

@media (max-width: 480px) {
    .insight-item {
        padding: 0.75rem;
        gap: 0.5rem;
    }
    
    .insight-icon {
        font-size: 1.25rem;
    }
    
    .insight-text {
        font-size: 0.85rem;
        line-height: 1.4;
    }
}

/* ============================================
   BADGES MOBILE FIX
   ============================================ */

@media (max-width: 480px) {
    .badge-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
    }
    
    .badge-card {
        padding: 0.75rem;
    }
    
    .badge-icon {
        font-size: 2rem;
    }
    
    .badge-name {
        font-size: 0.75rem;
    }
}

/* ============================================
   CONTAINER PADDING FIX
   ============================================ */

@media (max-width: 480px) {
    .container {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
    }
}

@media (max-width: 375px) {
    .container {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
    }
}

/* ============================================
   PREVENT HORIZONTAL SCROLL
   ============================================ */

html, body {
    overflow-x: hidden;
    max-width: 100vw;
    position: relative;
}

body * {
    max-width: 100%;
}

/* Ensure no element causes horizontal overflow */
.main-content,
.dashboard-grid,
.widget,
.stat-card,
.stats-grid {
    max-width: 100%;
    overflow-x: hidden;
}

/* ============================================
   TOUCH TARGET IMPROVEMENTS
   ============================================ */

@media (max-width: 480px) {
    /* Ensure all interactive elements have minimum 44x44px touch targets */
    button,
    .btn,
    .btn-add,
    .theme-toggle,
    .btn-icon {
        min-height: 44px;
        min-width: 44px;
    }
    
    /* Exception for small icons within larger clickable areas */
    .stat-card button,
    .medication-item button {
        min-height: 36px;
        min-width: 36px;
    }
}
